fetch('/api/products?page=1')  // 或加分类 ?category=水果
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById('products');
    container.innerHTML = data.list.map(p => `
      <div class="card">
        ${p.image ? `<img src="${p.image}" alt="${p.name}">` : `<div class="no-image">无图片</div>`}
        <div class="info">
          <div class="name">${p.name}</div>
          <div class="price">${p.price} ${p.currency}</div>
          <div class="meta">${p.unit || ''} · ${p.category || '未分类'} · 库存 ${p.stock || 0}</div>
          <div class="description">${marked.parse(p.body || '')}</div>
        </div>
      </div>
    `).join('');
  })
  .catch(() => {
    const container = document.getElementById('products');
    container.innerHTML = '<div class="loading">加载失败</div>';
  });
